(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const ko = require('knockout');
const octicons = require('octicons');
const components = require('ungit-components');

components.register('home', args => new HomeViewModel(args.app));

class HomeRepositoryViewModel {
  constructor(home, path) {
    this.home = home;
    this.app = home.app;
    this.server = this.app.server;
    this.path = path;
    this.title = path;
    this.link = `${ungit.config.rootPath}/#/repository?path=${encodeURIComponent(path)}`;
    this.pathRemoved = ko.observable(false);
    this.remote = ko.observable('...');
    this.updateState();
    this.removeIcon = octicons.x.toSVG({ 'height': 18 });
    this.arrowIcon = octicons['arrow-right'].toSVG({ 'height': 24 });
  }

  updateState() {
    this.server.getPromise(`/fs/exists?path=${encodeURIComponent(this.path)}`)
      .then(exists => { this.pathRemoved(!exists); })
      .catch((e) => this.server.unhandledRejection(e));
    this.server.getPromise(`/remotes/origin?path=${encodeURIComponent(this.path)}`)
      .then(remote => {	this.remote(remote.address.replace(/\/\/.*?\@/, '//***@')); })
      .catch(err => { this.remote(''); });
  }

  remove() {
    this.app.repoList.remove(this.path);
    this.home.update();
  }
}

class HomeViewModel {
  constructor(app) {
    this.app = app;
    this.repos = ko.observableArray();
    this.showNux = ko.computed(() => this.repos().length == 0);
    this.addIcon = octicons.plus.toSVG({ 'height': 18 });
  }

  updateNode(parentElement) {
    ko.renderTemplate('home', this, {}, parentElement);
  }

  shown() {
    this.update();
  }

  update() {
    const reposByPath = {};
    this.repos().forEach(repo => { reposByPath[repo.path] = repo; });
    this.repos(this.app.repoList().sort().map(path => {
      if (!reposByPath[path])
        reposByPath[path] = new HomeRepositoryViewModel(this, path);
      return reposByPath[path];
    }));
  }
  get template() { return 'home'; }
}

},{"knockout":"knockout","octicons":undefined,"ungit-components":"ungit-components"}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb21wb25lbnRzL2hvbWUvaG9tZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiY29uc3Qga28gPSByZXF1aXJlKCdrbm9ja291dCcpO1xuY29uc3Qgb2N0aWNvbnMgPSByZXF1aXJlKCdvY3RpY29ucycpO1xuY29uc3QgY29tcG9uZW50cyA9IHJlcXVpcmUoJ3VuZ2l0LWNvbXBvbmVudHMnKTtcblxuY29tcG9uZW50cy5yZWdpc3RlcignaG9tZScsIGFyZ3MgPT4gbmV3IEhvbWVWaWV3TW9kZWwoYXJncy5hcHApKTtcblxuY2xhc3MgSG9tZVJlcG9zaXRvcnlWaWV3TW9kZWwge1xuICBjb25zdHJ1Y3Rvcihob21lLCBwYXRoKSB7XG4gICAgdGhpcy5ob21lID0gaG9tZTtcbiAgICB0aGlzLmFwcCA9IGhvbWUuYXBwO1xuICAgIHRoaXMuc2VydmVyID0gdGhpcy5hcHAuc2VydmVyO1xuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgdGhpcy50aXRsZSA9IHBhdGg7XG4gICAgdGhpcy5saW5rID0gYCR7dW5naXQuY29uZmlnLnJvb3RQYXRofS8jL3JlcG9zaXRvcnk/cGF0aD0ke2VuY29kZVVSSUNvbXBvbmVudChwYXRoKX1gO1xuICAgIHRoaXMucGF0aFJlbW92ZWQgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcbiAgICB0aGlzLnJlbW90ZSA9IGtvLm9ic2VydmFibGUoJy4uLicpO1xuICAgIHRoaXMudXBkYXRlU3RhdGUoKTtcbiAgICB0aGlzLnJlbW92ZUljb24gPSBvY3RpY29ucy54LnRvU1ZHKHsgJ2hlaWdodCc6IDE4IH0pO1xuICAgIHRoaXMuYXJyb3dJY29uID0gb2N0aWNvbnNbJ2Fycm93LXJpZ2h0J10udG9TVkcoeyAnaGVpZ2h0JzogMjQgfSk7XG4gIH1cblxuICB1cGRhdGVTdGF0ZSgpIHtcbiAgICB0aGlzLnNlcnZlci5nZXRQcm9taXNlKGAvZnMvZXhpc3RzP3BhdGg9JHtlbmNvZGVVUklDb21wb25lbnQodGhpcy5wYXRoKX1gKVxuICAgICAgLnRoZW4oZXhpc3RzID0+IHsgdGhpcy5wYXRoUmVtb3ZlZCghZXhpc3RzKTsgfSlcbiAgICAgIC5jYXRjaCgoZSkgPT4gdGhpcy5zZXJ2ZXIudW5oYW5kbGVkUmVqZWN0aW9uKGUpKTtcbiAgICB0aGlzLnNlcnZlci5nZXRQcm9taXNlKGAvcmVtb3Rlcy9vcmlnaW4/cGF0aD0ke2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLnBhdGgpfWApXG4gICAgICAudGhlbihyZW1vdGUgPT4ge1x0dGhpcy5yZW1vdGUocmVtb3RlLmFkZHJlc3MucmVwbGFjZSgvXFwvXFwvLio/XFxALywgJy8vKioqQCcpKTsgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4geyB0aGlzLnJlbW90ZSgnJyk7IH0pO1xuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMuYXBwLnJlcG9MaXN0LnJlbW92ZSh0aGlzLnBhdGgpO1xuICAgIHRoaXMuaG9tZS51cGRhdGUoKTtcbiAgfVxufVxuXG5jbGFzcyBIb21lVmlld01vZGVsIHtcbiAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgdGhpcy5yZXBvcyA9IGtvLm9ic2VydmFibGVBcnJheSgpO1xuICAgIHRoaXMuc2hvd051eCA9IGtvLmNvbXB1dGVkKCgpID0+IHRoaXMucmVwb3MoKS5sZW5ndGggPT0gMCk7XG4gICAgdGhpcy5hZGRJY29uID0gb2N0aWNvbnMucGx1cy50b1NWRyh7ICdoZWlnaHQnOiAxOCB9KTtcbiAgfVxuXG4gIHVwZGF0ZU5vZGUocGFyZW50RWxlbWVudCkge1xuICAgIGtvLnJlbmRlclRlbXBsYXRlKCdob21lJywgdGhpcywge30sIHBhcmVudEVsZW1lbnQpO1xuICB9XG5cbiAgc2hvd24oKSB7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCByZXBvc0J5UGF0aCA9IHt9O1xuICAgIHRoaXMucmVwb3MoKS5mb3JFYWNoKHJlcG8gPT4geyByZXBvc0J5UGF0aFtyZXBvLnBhdGhdID0gcmVwbzsgfSk7XG4gICAgdGhpcy5yZXBvcyh0aGlzLmFwcC5yZXBvTGlzdCgpLnNvcnQoKS5tYXAocGF0aCA9PiB7XG4gICAgICBpZiAoIXJlcG9zQnlQYXRoW3BhdGhdKVxuICAgICAgICByZXBvc0J5UGF0aFtwYXRoXSA9IG5ldyBIb21lUmVwb3NpdG9yeVZpZXdNb2RlbCh0aGlzLCBwYXRoKTtcbiAgICAgIHJldHVybiByZXBvc0J5UGF0aFtwYXRoXTtcbiAgICB9KSk7XG4gIH1cbiAgZ2V0IHRlbXBsYXRlKCkgeyByZXR1cm4gJ2hvbWUnOyB9XG59XG4iXX0=
